rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Books collection with ratings subcollection
    match /books/{bookId} {
      // Allow reading books to everyone
      allow read: if true;
      
      // Allow creating books
      allow create: if true;
      
      // Allow updating books (for rating aggregates)
      allow update: if true;
      
      // Ratings subcollection
      match /ratings/{ratingId} {
        // Allow reading ratings to everyone
        allow read: if true;
        
        // Allow creating ratings
        allow create: if true;
        
        // Allow updating ratings (in case needed)
        allow update: if true;
        
        // Allow deleting ratings (in case needed)
        allow delete: if true;
      }
    }
  }
}
